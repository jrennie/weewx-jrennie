############################################################################################
#                                                                                          #
#                                                                                          #
#                               WEEWX CONFIGURATION FILE                                   #
#                                                                                          #
#                                                                                          #
############################################################################################
#                                                                                          #
#                    Copyright (c) 2009 Tom Keffer <tkeffer@gmail.com>                     #
#                                                                                          #
#                      See the file LICENSE.txt for your full rights.                      #
#                                                                                          #
############################################################################################
#
#    $Revision$
#    $Author$
#    $Date$
#
############################################################################################

#
# This section is for general configuration information
#

# Set to 1 for extra debug info, otherwise comment it out or set to zero.
debug = 0

# How long to wait before timing out a socket (FTP, HTTP) connection:
socket_timeout = 20

############################################################################################

[Station]
    
    #
    # This section is for information about your station
    #
    
    # Root directory of the weewx file hierarchy for this station:
    WEEWX_ROOT = /home/weewx
    
    location = "Hood River, Oregon"
    latitude = 45.686
    longitude = -121.566
    altitude = 700
    rain_year_start = 10
    radar_url = http://radar.weather.gov/ridge/lite/N0R/RTX_loop.gif
    
    # Base temperature for heating days:
    heating_base = 65
    # Base temperature for cooling days:
    cooling_base = 65

    # Set to hemisphere abbreviations suitable for your location: 
    hemispheres = N, S, E, W
    
    # How often to check the clock on the weather station for drift (in seconds)
    clock_check = 14400
    
    # Set to 1 (one) to cache LOOP data, otherwise zero. Most people
    # will want to set this to one unless you have a specialized application
    cache_loop_data = 1
    
    # Set to type of station (e.g., 'VantagePro' for a Davis VantagePro or VantagePro2)
    # Must match section name below.
    station_type = VantagePro

############################################################################################

[VantagePro]
    
    #
    # This section is for configuration info for a Davis VantagePro or
    # VantagePro2
    #
    
    # Its port.
    #
    #   Ubuntu and SuSE:
    #     /dev/ttyUSB0 is a common USB port name
    #     /dev/ttyS0 a common serial port name
    port = /dev/ttyUSB0
    #port = /dev/ttyS0
    
    # Its baud rate (usually 19200)
    baudrate = 19200
    
    # Archive interval in seconds for your station.  (Used only when configuring
    # the station; otherwise it is downloaded from the station)
    archive_interval = 300
    
    # The id of your ISS station (usually 1)
    iss_id = 1
    
    # How long to wait (in seconds) before processing new archive data
    archive_delay = 15
    
    # How long to wait for a response from the station before giving up (in
    # seconds; must be greater than 2)
    timeout = 5
    
    # How long to wait before trying again (in seconds)
    wait_before_retry = 1.2
    
    # How many times to try before giving up:
    max_retries = 4
    
    # How much it can drift before we will correct it (in seconds):
    max_drift = 5
    
    # What unit system to use on the station. 1=imperial (the only one the VP
    # supports)
    unit_system = 1

############################################################################################

[FTP]
    
    #
    # This section is for configuring FTP uploads to a remote web server.
    #
    # If you wish to do this, make sure the following four lines are uncommented
    # and filled out somewhere in this section:
#    user = replace with your username
#    password = replace with your password
#    server = replace with your server name, e.g, www.threefools.org
#    path = replace with the destination root directory on your server (e.g., '/weather)
    
    # Set to 1 to use passive mode, zero for active mode:
    passive = 1
    
    # How many times to try to transfer a file before giving up:
    max_retries = 3

############################################################################################

[Wunderground]

    #
    # This section is for configuring data transfer to your Weather Underground
    # station.
    #
    # If you wish to do this, make sure the following two lines are uncommented
    # and filled out somewhere in this section.

#    station  = your Weather Underground station ID here (eg, KORHOODR3)
#    password = your password here

############################################################################################

[Archive]
    
    #
    # This section is for configuration info about the sqlite3 archive database
    #
    
    # The path to the database, relative to the WEEWX_ROOT directory
    archive_file = archive/weewx.sdb
    
    # What unit system to use in the database. 1=imperial (the only
    # one supported now)
    unit_system = 1

############################################################################################

[Stats]
    
    #
    # This section is for configuration info about the sqlite3 statistical
    # database
    #
    
    # Path to the statistics database, relative to the WEEWX_ROOT directory:
    stats_file = archive/stats.sdb
    
    # The types for which Hi/Low statistics will be kept. Types not listed will
    # not be available for HTML pages and other stats. Note that while most
    # types correspond to their SQL counterpart, 'wind' is a special type that
    # replaces windSpeed and windGust. It can answer queries such as dominant
    # wind directions, etc.  If not given, statistics will be kept for all
    # possible types, resulting in a possibly much bigger than necessary stats
    # database.
    
    stats_types = wind, barometer, inTemp, outTemp, inHumidity, outHumidity, rainRate, rain, dewpoint, windchill, heatindex, ET, radiation, UV, extraTemp1, rxCheckPercent, heatdeg, cooldeg

############################################################################################

[Images]
    
    # 
    # This section lists all the images to be generated, what SQL types are to
    # be included in them, along with many plotting options, such as color or
    # font. There's a default for almost everything, if not specified
    # below. Nevertheless, I've explicitly put in values, to make it easy to see
    # and understand the options.
    #
    # Fonts can be anything accepted by the Python Imaging Library (PIL), which
    # is currently truetype (.ttf), or PIL's own font format (.pil). See
    # http://www.pythonware.com/library/pil/handbook/imagefont.htm for more
    # details.  Note that "font size" is only used with truetype (.ttf)
    # fonts. For others, font size is determined by the bit-mapped size, usually
    # encoded in the file name (e.g., courB010.pil). If a font can't be found,
    # then a default font will be used.
    #
    
    # Where the generated images should go, relative to WEEWX_ROOT
    image_root = public_html
    
    image_width = 300
    image_height = 180
    image_background_color = 0xf5f5f5
    
    chart_background_color = 0xd8d8d8
    chart_gridline_color = 0xa0a0a0
    
    top_label_font_path = /usr/share/fonts/truetype/freefont/FreeMonoBold.ttf
    top_label_font_size = 10
    
    unit_label_font_path = /usr/share/fonts/truetype/freefont/FreeMonoBold.ttf
    unit_label_font_size = 10
    unit_label_font_color = 0x000000
    
    bottom_label_font_path = /usr/share/fonts/truetype/freefont/FreeMonoBold.ttf
    bottom_label_font_size = 12
    bottom_label_font_color = 0x000000
    
    axis_label_font_path = /usr/share/fonts/truetype/freefont/FreeMonoBold.ttf
    axis_label_font_size = 10
    axis_label_font_color = 0x000000
    
    # Options for the compass rose, used for progressive vector plots
    rose_label = N
    rose_label_font_path = /usr/share/fonts/truetype/freefont/FreeMonoBold.ttf
    rose_label_font_size  = 10
    rose_label_font_color = 0x000000
    
    
    # Default colors for the plot lines. These can be overridden for
    # individual lines using option 'color'
    chart_line_colors = 0xb48242, 0x4242b4, 0x42b442
    
    ##
    ## What follows is a list of subsections, each specifying a time span, such
    ## as a day, week, month, or year. There's nothing special about them or
    ## their names: it's just a convenient way to group plots with a time span
    ## in common. You could add a time span [[biweek_images]] and add the
    ## appropriate time length, aggregation strategy, etc., without changing any
    ## code.
    ##
    ## Within each time span, each sub-subsection is the name of a plot to be
    ## generated for that time span. The generated plot will be stored using
    ## that name, in whatever directory was specified by option 'image_root'
    ## above.
    ##
    ## With one final nesting (four brackets!) is the sql type of each line to
    ## be included within that plot.
    ##
    ## Unless overridden, leaf nodes inherit options from their parent
    ##
    
    # Default plot and aggregation. Can get overridden at any level.
    plot_type = line
    aggregate_type = none
    width = 1
    time_length = 86400    # == 24 hours

    # The following option merits an explanation. The y-axis scale used for plotting
    # can be controlled using option 'yscale'. It is a 3-way tuple, with
    # values (ylow, yhigh, min_interval). If set to "None", a parameter is
    # set automatically, otherwise the value is used. However, in the case of
    # min_interval, what is set is the *minimum* y-axis tick interval. 
    yscale = None, None, None

    # For progressive vector plots, you can choose to rotate the vectors.
    # Positive is clockwise.
    # For my area, westerlies overwhelmingly predominate, so by rotating
    # positive 90 degrees, the average vector will point straight up.
    vector_rotate = 90

    [[day_images]]
        x_label_format = %H:%M
        bottom_label_format = %m/%d/%y %H:%M
        time_length = 86400    # == 24 hours
        
        [[[daybarometer]]]
            [[[[barometer]]]]
        
        [[[daytempdew]]]
            [[[[outTemp]]]]
            [[[[dewpoint]]]]
        
        [[[daytempchill]]]
            [[[[windchill]]]]
            [[[[heatindex]]]]
        
        [[[dayrain]]]
        	# Make sure the y-axis increment is at least 0.02 for the rain plot:
            yscale = None, None, 0.02
            plot_type = bar
            [[[[rain]]]]
                aggregate_type = sum
                aggregate_interval = 3600
                label = Rain (hourly avg)
                
        
        [[[dayrx]]]
            [[[[rxCheckPercent]]]]
        
        [[[daypond]]]
        	yscale = None, None, 0.5
            [[[[extraTemp1]]]]
        
        [[[daywind]]]
            [[[[windSpeed]]]]
            [[[[windGust]]]]
        
        [[[dayinside]]]
            [[[[inTemp]]]]
            [[[[inHumidity]]]]
        
        [[[daywinddir]]]
        	# Hardwire in the y-axis scale for wind direction:
        	yscale = 0.0, 360.0, 45.0
            [[[[windDir]]]]
    
        [[[daywindvec]]]
            [[[[windvec]]]]
                plot_type = vector

    [[week_images]]
        x_label_format = %d
        bottom_label_format = %m/%d/%y %H:%M
        time_length = 604800    # == 7 days
        aggregate_type = avg
        aggregate_interval = 3600
        
        [[[weekbarometer]]]
            [[[[barometer]]]]
        
        [[[weektempdew]]]
            [[[[outTemp]]]]
            [[[[dewpoint]]]]
        
        [[[weektempchill]]]
            [[[[windchill]]]]
            [[[[heatindex]]]]
        
        [[[weekrain]]]
            yscale = None, None, 0.02
            plot_type = bar
            [[[[rain]]]]
                aggregate_type = sum
                aggregate_interval = 86400
                label = Rain (daily avg)
        
        [[[weekpond]]]
        	yscale = None, None, 0.5
            [[[[extraTemp1]]]]
        
        [[[weekrx]]]
            [[[[rxCheckPercent]]]]
        
        [[[weekwind]]]
            [[[[windSpeed]]]]
            [[[[windGust]]]]
                aggregate_type = max
        
        [[[weekinside]]]
            [[[[inTemp]]]]
            [[[[inHumidity]]]]
        
        [[[weekwinddir]]]
        	yscale = 0.0, 360.0, 45.0
            [[[[windDir]]]]
    
        [[[weekwindvec]]]
            [[[[windvec]]]]
                plot_type = vector

    [[month_images]]
        x_label_format = %d
        bottom_label_format = %m/%d/%y %H:%M
        time_length = 2592000    # == 30 days
        aggregate_type = avg
        aggregate_interval = 10800    # == 3 hours
        
        [[[monthbarometer]]]
            [[[[barometer]]]]
        
        [[[monthtempdew]]]
            [[[[outTemp]]]]
            [[[[dewpoint]]]]
        
        [[[monthtempchill]]]
            [[[[windchill]]]]
            [[[[heatindex]]]]
        
        [[[monthrain]]]
            yscale = None, None, 0.02
            plot_type = bar
            [[[[rain]]]]
                aggregate_type = sum
                aggregate_interval = 86400
                label = Rain (daily avg)
        
        [[[monthpond]]]
        	yscale = None, None, 0.5
            [[[[extraTemp1]]]]
        
        [[[monthrx]]]
            [[[[rxCheckPercent]]]]
        
        [[[monthwind]]]
            [[[[windSpeed]]]]
            [[[[windGust]]]]
                aggregate_type = max
        
        [[[monthinside]]]
            [[[[inTemp]]]]
            [[[[inHumidity]]]]
        
        [[[monthwinddir]]]
        	yscale = 0.0, 360.0, 45.0
            [[[[windDir]]]]
    
        [[[monthwindvec]]]
            [[[[windvec]]]]
                plot_type = vector

    [[year_images]]
        x_label_format = %m/%d
        bottom_label_format = %m/%d/%y
        time_length = 31536000    # == 365 days
        aggregate_type = avg
        aggregate_interval = 86400
        
        [[[yearbarometer]]]
            [[[[barometer]]]]
        
        
        [[[yeartempdew]]]
            [[[[outTemp]]]]
            [[[[dewpoint]]]]
        
        [[[yearwind]]]
            [[[[windSpeed]]]]
            [[[[windGust]]]]
                aggregate_type = max
        
        [[[yeartempchill]]]
            [[[[windchill]]]]
            [[[[heatindex]]]]
        
        [[[yearrain]]]
            yscale = None, None, 0.02
            plot_type = bar
            [[[[rain]]]]
                aggregate_type = sum
                #			aggregate_interval = 2629800 # Magic number: the length of a nominal month
                aggregate_interval = 604800    # == 1 week
                label = Rain (weekly avg)
        
        [[[yearpond]]]
        	yscale = None, None, 0.5
            [[[[extraTemp1]]]]
        
        [[[yearrx]]]
            [[[[rxCheckPercent]]]]
        
        [[[yearinside]]]
            [[[[inTemp]]]]
            [[[[inHumidity]]]]
        
        [[[yearwinddir]]]
        	yscale = 0.0, 360.0, 45.0
            [[[[windDir]]]]

        [[[yearwindvec]]]
            [[[[windvec]]]]
                plot_type = vector

        # A progressive vector plot of daily gust vectors overlayed
        # with the daily wind average would look something like this:
#        [[[yeargustvec]]]
#            [[[[windvec]]]]
#                plot_type = vector
#                aggregate_type = avg
#            [[[[windgustvec]]]]
#                plot_type = vector
#                aggregate_type = max

############################################################################################

[Labels]
    
    #
    # Generic labels to be used in plots, keyed by a SQL type, if no explicit
    # label is specified in section [Images]
    #
    
    [[Generic]]
        inTemp = Inside Temperature
        outTemp = Outside Temperature
        inHumidity = Inside Humidity
        outHumidity = Outside Humidity
        windSpeed = Wind Speed
        windDir = Wind Direction
        windGust = Gust Speed
        windGustDir = Gust Direction
        windvec = Wind Vector
        windgustvec = Gust Vector
        rainRate = Rain Rate
        rain = Rain
        dewpoint = Dew Point
        windchill = Wind Chill
        heatindex = Heat Index
        radiation = Radiation
        extraTemp1 = Pond Temperature
    
    [[ImperialFormats]]
        barometer = %.3f
        pressure = %.3f
        altimeter = %.3f
        inTemp = %.1f
        outTemp = %.1f
        inHumidity = %.0f
        outHumidity = %.0f
        windSpeed = %.0f
        windDir = %.0f
        windGust = %.0f
        windGustDir = %.0f
        windvec = %.0f
        windgustvec = %.0f
        wind = %.0f
        vecdir = %.0f
        vecavg = %.1f
        rms = %.1f
        gustdir = %.0f
        rainRate = %.2f
        rain = %.2f
        dewpoint = %.1f
        windchill = %.1f
        heatindex = %.1f
        ET = %.2f
        radiation = %.0f
        UV = %.0f
        extraTemp1 = %.0f
        extraTemp2 = %.0f
        extraTemp3 = %.0f
        soilTemp1 = %.0f
        soilTemp2 = %.0f
        soilTemp3 = %.0f
        soilTemp4 = %.0f
        leafTemp1 = %.0f
        leafTemp2 = %.0f
        extraHumid1 = %.0f
        extraHumid2 = %.0f
        soilMoist1 = %.0f
        soilMoist2 = %.0f
        soilMoist3 = %.0f
        soilMoist4 = %.0f
        rxCheckPercent = %.0f
        consBatteryVoltage = %.2f
        hail = %.2f
        hailRate = %.2f
        heatingTemp = %.0f
        heatingVoltage = %.2f
        supplyVoltage = %.2f
        referenceVoltage = %.2f
        altitude = %.0f
    
    
    [[ImperialUnits]]
        barometer = inHg
        pressure = inHg
        altimeter = inHg
        inTemp = \xb0F
        outTemp = \xb0F
        inHumidity = %
        outHumidity = %
        windSpeed = mph
        windDir = \xb0
        windGust = mph
        windGustDir = \xb0
        windvec = mph
        windgustvec = mph
        wind = mph
        vecdir = \xb0
        gustdir = \xb0
        rms = mph
        vecavg = mph
        rainRate = in/hr
        rain = in
        dewpoint = \xb0F
        windchill = \xb0F
        heatindex = \xb0F
        ET = in
        radiation = W/m\xb2
        UV = W/m\xb2
        extraTemp1 = \xb0F
        extraTemp2 = \xb0F
        extraTemp3 = \xb0F
        soilTemp1 = \xb0F
        soilTemp2 = \xb0F
        soilTemp3 = \xb0F
        soilTemp4 = \xb0F
        leafTemp1 = \xb0F
        leafTemp2 = \xb0F
        extraHumid1 = %
        extraHumid2 = %
        soilMoist1 = cb
        soilMoist2 = cb
        soilMoist3 = cb
        soilMoist4 = cb
        rxCheckPercent = %
        consBatteryVoltage = V
        hail = in
        hailRate = in/hr
        heatingTemp = \xb0F
        heatingVoltage = V
        supplyVoltage = V
        referenceVoltage = V
        altitude = ft

#[[Time]]
#	date_format     = %d-%b-%Y
#	time_format     = %H:%M
#	datetime_format = %d-%b-%Y %H:%M


############################################################################################

[HTML]
    
    # Where the HTML templates reside, relative to WEEWX_ROOT:
    template_root = templates
    
    # Where the generated HTML should go, relative to WEEWX_ROOT:
    html_root = public_html
    
    [[ImperialUnits]]
        barometer = " inHg"
        pressure = " inHg"
        altimeter = " ft"
        inTemp = &deg;F
        outTemp = &deg;F
        inHumidity = %
        outHumidity = %
        windSpeed = " mph"
        windDir = &deg;
        windGust = " mph"
        windGustDir = &deg;
        wind = " mph"
        vecdir = &deg;
        gustdir = &deg;
        rms = " mph"
        vecavg = " mph"
        rainRate = " in/hr"
        rain = " in"
        dewpoint = &deg;F
        windchill = &deg;F
        heatindex = &deg;F
        ET = " in"
        radiation = W/m&sup2;
        UV = W/m&sup2;
        extraTemp1 = &deg;F
        extraTemp2 = &deg;F
        extraTemp3 = &deg;F
        soilTemp1 = &deg;F
        soilTemp2 = &deg;F
        soilTemp3 = &deg;F
        soilTemp4 = &deg;F
        leafTemp1 = &deg;F
        leafTemp2 = &deg;F
        extraHumid1 = %
        extraHumid2 = %
        soilMoist1 = " cb"
        soilMoist2 = " cb"
        soilMoist3 = " cb"
        soilMoist4 = " cb"
        rxCheckPercent = %
        consBatteryVoltage = V
        hail = " in"
        hailRate = " in/hr"
        heatingTemp = &deg;F
        heatingVoltage = V
        supplyVoltage = V
        referenceVoltage = V
    
    [[Time]]
        day = %H:%M
        week = %H:%M on %A
        month = %d-%b-%Y %H:%M
        year = %d-%b-%Y %H:%M
        rainyear = %d-%b-%Y %H:%M
        current = %d-%b-%Y %H:%M

############################################################################################

[NOAA]
    
    # Where the NOAA template reside, relative to WEEWX_ROOT:
    template_root = templates
    
    # Where the generated NOAA monthly reports should go, relative to WEEWX_ROOT:
    noaa_root = public_html/NOAA

############################################################################################

[Almanac]
    
    # The labels to be used for the phases of the moon:
    moon_phases = New, Waxing crescent, First quarter, Waxing gibbous, Full, Waning gibbous, Last quarter, Waning crescent

############################################################################################

[Engines]

	# This section configures the internal weewx engines. It is for advanced customization.

	[[WxEngine]]
		# The list of services the main weewx engine should run:
		service_list = weewx.wxengine.StdWunderground, weewx.wxengine.StdCatchUp, weewx.wxengine.StdTimeSynch, weewx.wxengine.StdPrint, weewx.wxengine.StdProcess

	[[ReportEngine]]
	# The list of reports the report engine should run:
		report_list = weewx.reportengine.FileGen, weewx.reportengine.ImageGen, weewx.reportengine.Ftp
		